FROM node

# 도커에게 모든 후속 명령이 /app 내부에서 실행될 것을 알림
WORKDIR /app

# 첫번째 . 은 이 프로젝트의 모든 폴더, 하위 폴더 및 파일을 복사해야한다고 도커에 알려줌
# 두번째 ./ 은 그파일을 저장해야하는 이미지 내부의 경로 (/app)
COPY . ./
# COPY . /app # 이렇게 ./이 아닌 /app으로 절대 경로를 지정해 두면, 복사할 위치를 정확히 알 수있고
# 현재 작업 dir이 뭔지 보기 위해 그 파일을 추측하거나 살펴볼 필요가 없다

# 이미지에서 RUN 할 명령
RUN npm install

# Dockerfile 마지막 명령전에 로컬의 특정 포트를 노출하고 싶다는 것을 도커에 알려야함
EXPOSE 80

# 모든 작업이 완료되면, 서버를 실행하라
# 이미지를 기반으로 컨테이너가 시작될 때 실행
# 아래의 코드는 틀린코드, 이미지가 빌드될 때마다 실행되기 때문
# RUN node server.js
CMD ["node", "server.js"]